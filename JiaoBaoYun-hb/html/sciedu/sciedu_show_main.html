<!--
	作者：444811716@qq.com
	时间：2017-01-17
	描述：打开链接
-->
<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/utils/common.css" />
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<a id="spinner" class="mui-pull-right" style="padding-top: 10px;">
				<span class="mui-spinner"></span>
			</a>
		</header>
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/utils/events.js"></script>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(function() {
				events.blurBack();
				var main = plus.webview.currentWebview(); //获取当前窗体对象
				var data = main.data; //接收A页面传入参数值
				console.log('main-data:' + JSON.stringify(data));
				var sub = events.createSubAppendMain(main, data.turl, {}, function() {
					console.log('sub loaded');
					document.getElementById("spinner").style.display = 'none';
				});
				sub.addEventListener("loading", function() { //Webview窗口页面开始加载事件
					console.log('sub loading');
					sub.evalJS('window.onerror = function(){console.log("news error");window.close();}');
				});
				sub.addEventListener("error", function() { //Webview窗口错误事件
					console.log('sub error');
					document.getElementById("spinner").style.display = 'none';
					mui.toast('加载失败');
				});
				//---获取数据---end---
			});
		</script>
	</body>

</html>