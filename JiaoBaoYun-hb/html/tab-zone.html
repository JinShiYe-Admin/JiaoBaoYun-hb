<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../css/utils/common.css" />
		<!--本页面样式表-->
		<link rel="stylesheet" href="../css/home/zone.css" />
		<script type="text/javascript" src="../js/mui.min.js"></script>
		<!--公用事件js文件-->
		<script type="text/javascript" src="../js/utils/events.js"></script>
		<!--侧滑-->
		<script src="../js/main/slide_navigation.js">
		</script>
		<style type="text/css">
			/*自定义系统segmentcontrol控件*/
			/*整体控件样式*/
			
			.mui-segmented-control {
				font-size: 14px;
				width: 50%;
				border: 0px solid gray;
				background-color: transparent;
			}
			
			.mui-segmented-control .mui-control-item {
				line-height: 20px;
				color: black;
				border-left: 1px solid gray
			}
			/*选择的item样式*/
			
			.mui-segmented-control.mui-segmented-control .mui-control-item.mui-active {
				color: #007aff;
				border-bottom: 0px solid red;
				background: 0 0
			}
			
			.parent-table1 {}
			
			.parent-cell1 {}
			
			.parent-table2 {}
			
			.parent-cell2 {}
		</style>
	</head>

	<body>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<!--第一个列表-->
				<ul class="mui-table-view">
					<!--学生动态入口start-->
					<li class="mui-table-view-cell mui-media studentsdynamic">
						<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u72.png">
						<p class="time">10月19</p>
						<div class="mui-media-body">
							李欣芸
							<p class='mui-ellipsis'>今天上课表现良好</p>
						</div>
					</li>
					<!--学生动态入口end-->
					<li id="tarClass" class="mui-table-view-cell mui-media">

						<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u72.png">
						<p class="time">10月19</p>
						<div class="mui-media-body">
							1001班
							<p class='mui-ellipsis'>期末成绩出来了，热烈庆祝我们排全校第二<img src="../image/tab_zone/u91.png"></p>
						</div>

					</li>
					<li class="mui-table-view-cell mui-media">

						<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u34.png">
						<p class="time">10月18</p>
						<div class="mui-media-body">
							1002班
							<p class='mui-ellipsis'>在今天的全校演讲比赛中，我班有6名同学获奖...</p>
						</div>

					</li>

				</ul>

				<!--标题栏-->
				<h4>
					<img  src="../image/tab_zone/u131.png" />
					<span  class="parent">家长圈</span>
					<!--<hr class="vertical-line" />-->
					<div style="padding: 10px 10px 10px 100px;margin-top: -45px;">

				<div id="segmentedControl" class="mui-segmented-control mui-segmented-control-primary">

					<a class="mui-control-item mui-active" href="#item1">
				1001班<span class="mui-badge mui-badge-danger custom-badge1"  >3</span>
			</a>
					<a class="mui-control-item" href="#item2">
				1002班<span class="mui-badge mui-badge-danger custom-badge1"  >1</span>
			</a>

				</div>
			</div>
				</h4>
				<!--第二个列表-->
				<div style="margin-top: -10px;">
					<div id="item1" class="mui-control-content mui-active">

						<ul class="mui-table-view parent-table1">
							<li class="mui-table-view-cell mui-media parent-cell1">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u72.png" />
								<span style="float: left;"><img src="../image/tab_zone/u85.png" class="red-point" /></span>
								<p class="time">10月19</p>
								<div class="mui-media-body" ;>
									张雨欣
									<p class='mui-ellipsis'>期末成绩出来了，热烈庆祝我们排全校第二<img src="../image/tab_zone/u91.png"></p>
								</div>

							</li>
							<li class="mui-table-view-cell mui-media parent-cell1">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u34.png">
								<span style="float: left;"><img src="../image/tab_zone/u85.png" class="red-point" /></span>
								<p class="time">10月18</p>
								<div class="mui-media-body">
									李芸
									<p class='mui-ellipsis'>在今天的全校演讲比赛中，我班有6名同学获奖...</p>
								</div>

							</li>
							<li class="mui-table-view-cell mui-media parent-cell1">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u72.png" />
								<span style="float: left;"><img src="../image/tab_zone/u85.png" class="red-point" /></span>
								<p class="time">10月19</p>
								<div class="mui-media-body" ;>
									张雨欣
									<p class='mui-ellipsis'>期末成绩出来了，热烈庆祝我们排全校第二<img src="../image/tab_zone/u91.png"></p>
								</div>

							</li>
							<li class="mui-table-view-cell mui-media parent-cell1">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u34.png">
								<p class="time">10月18</p>
								<div class="mui-media-body">
									李芸
									<p class='mui-ellipsis'>在今天的全校演讲比赛中，我班有6名同学获奖...</p>
								</div>

						</ul>
					</div>
					<div id="item2" class="mui-control-content">

						<ul class="mui-table-view parent-table2">
							<li class="mui-table-view-cell mui-media parent-cell2">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u72.png" />
								<span style="float: left;"><img src="../image/tab_zone/u85.png" class="red-point" /></span>
								<p class="time">10月20</p>
								<div class="mui-media-body" ;>
									李丽
									<p class='mui-ellipsis'>期末成绩出来了，热烈庆祝我们排全校第二<img src="../image/tab_zone/u91.png"></p>
								</div>

							</li>
							<li class="mui-table-view-cell mui-media parent-cell2">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u34.png">
								<p class="time">10月18</p>
								<div class="mui-media-body">
									张曦曦
									<p class='mui-ellipsis'>在今天的全校演讲比赛中，我班有6名同学获奖...</p>
								</div>

							</li>
							<li id="zhang" class="mui-table-view-cell mui-media parent-cell2">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u72.png" />
								<p class="time">10月19</p>
								<div class="mui-media-body" ;>
									刘若曦
									<p class='mui-ellipsis'>期末成绩出来了，热烈庆祝我们排全校第二<img src="../image/tab_zone/u91.png"></p>
								</div>

							</li>
							<li class="mui-table-view-cell mui-media parent-cell2">

								<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u34.png">
								<p class="time">10月18</p>
								<div class="mui-media-body">
									安琪
									<p class='mui-ellipsis'>在今天的全校演讲比赛中，我班有6名同学获奖...</p>
								</div>

						</ul>
					</div>
				</div>
			</div>
		</div>

		<script>
			mui.init({
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						callback: pulldownRefresh
					},
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});

			function pulldownRefresh() {
				setTimeout(function() {
					var itemId = getActiveControl();
					console.log(itemId);
					var table;
					var cells;
					if(itemId == '#item1') {
						table = document.body.querySelector('.parent-table1');
						cells = document.body.querySelectorAll('.parent-cell1');
					} else {
						table = document.body.querySelector('.parent-table2');
						cells = document.body.querySelectorAll('.parent-cell2');
					}

					for(var i = cells.length, len = i + 3; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell mui-media parent-cell';
						li.innerHTML = '	<img class="mui-media-object mui-pull-left" src="../image/tab_zone/u34.png">\<p class="time">10月18</p>\<div class="mui-media-body">张曦曦<p class="mui - ellipsis">\在今天的全校演讲比赛中，我班有6名同学获奖...</p>\</div>';
						//下拉刷新，新纪录插到最前面；
						table.insertBefore(li, table.firstChild);
					}
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}, 1500);
			}
			var count = 0;

			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh(); //参数为true代表没有更多数据了。

				}, 1500);
			}
			var firstbtn = function(e) {
				e.style.color = 'cornflowerblue'
				var btn2 = document.getElementById('btn2');
				btn2.style.color = 'black';
			}
			var secondbtn = function(e) {
				e.style.color = 'cornflowerblue'
				var btn1 = document.getElementById('btn1');
				btn1.style.color = 'black';
				var ps = document.getElementsByClassName('time');
				for(var i = 0; i < ps.length; i++) {
					ps[i].innerText = '10月20'
				}
				var contentnodes = document.getElementsByClassName('mui-ellipsis')
				for(var i = 0; i < contentnodes.length; i++) {
					contentnodes[i].innerText = '在今天的全校演讲比赛中，我班有6名同学获奖...'

				}
				var namenodes = document.getElementsByClassName('mui-media-body')
				for(var i = 0; i < namenodes.length; i++) {
					namenodes[i].innerHTML = '张雨欣' + '\<p class="mui-ellipsis ">' + contentnodes[i].innerHTML + '</p>'

				}

			}
		</script>
	</body>
	<script>
		mui.plusReady(function() {
			var zhang = document.getElementById('zhang');
			events.jumpPage(zhang, 'quan/zone_main.html');
			var tar = document.getElementById('tarClass');
			events.jumpPage(tar, 'quan/class_space.html');
			console.log(localStorage.getItem('$Statusbar'));

			//跳转到学生动态界面
			mui('.mui-table-view').on('tap', '.studentsdynamic', function() {
				mui.openWindow({
					url: 'quan/studentdynamic_main.html',
					id: 'quan/studentdynamic_main.html',
					styles: {
						top: '0px', //设置距离顶部的距离
						bottom: '0px'
					}
				});
			});

			//跳转到家长空间界面
			mui('.mui-table-view').on('tap', '.parent-cell1', function() {
				mui.openWindow({
					url: 'quan/zone_main.html',
					id: 'quan/zone_main.html',
					styles: {
						top: '0px', //设置距离顶部的距离
						bottom: '0px'
					}
				});
			});
			//跳转到家长空间界面
			mui('.mui-table-view').on('tap', '.parent-cell2', function() {
				mui.openWindow({
					url: 'quan/zone_main.html',
					id: 'quan/zone_main.html',
					styles: {
						top: '0px', //设置距离顶部的距离
						bottom: '0px'
					}
				});
			});

		})

		function getActiveControl() {
			var segmentedControl = document.getElementById("segmentedControl");
			var links = segmentedControl.getElementsByTagName('a');
			for(var i = 0; i < links.length; i++) {
				if(links[i].getAttribute('class').indexOf('mui-active') > 0) {
					var id = links[i].getAttribute('href');
					return id;
				}
			}
		}
	</script>

</html>