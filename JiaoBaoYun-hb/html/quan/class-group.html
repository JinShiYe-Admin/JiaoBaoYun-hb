<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link href="../../css/utils/common.css" rel="stylesheet" />
		<link href="../../css/quan/class_space.css" rel="stylesheet" />
		
		<style type="text/css">
			.mui-segmented-control {
				font-size: 14px;
				width: 50%;
				border: 0px solid gray;
				background-color: transparent;
			}
			
			.mui-segmented-control .mui-control-item {
				/*行高*/
				line-height: 30px;
				/*字体颜色*/
				color: black;
				/*中间竖线颜色*/
				border-left: 1px solid gray;
			}
			/*选择的item样式*/
			
			.mui-segmented-control.mui-segmented-control .mui-control-item.mui-active {
				color: #007aff;
				border-bottom: 0px solid red;
				background: 0 0
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 id="title" class="mui-title">1002班</h1>
		</header>
		<div class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<div style="background-color:lightgray">
					<div id="segmentedControl" class="mui-segmented-control mui-segmented-control-primary">

						<a class="mui-control-item mui-active" href="#item1">
							学生
						</a>
						<a class="mui-control-item" href="#item2">
							老师
						</a>
						<a class="mui-control-item" href="#item3">
							家长
						</a>

					</div>
				</div>
				<div id="item1" class="mui-control-content mui-active">
					<!--这里放置真实显示的DOM内容-->
					<ul id="gride1" class="mui-table-view mui-grid-view mui-grid-9"></ul>
					<button type="button" class="mui-btn mui-btn-danger group-button">退群</button>

				</div>
				<div id="item2" class="mui-control-content">
					<!--这里放置真实显示的DOM内容-->
					<ul id="gride2" class="mui-table-view mui-grid-view mui-grid-9"></ul>
					<button type="button" class="mui-btn mui-btn-danger group-button">退群</button>

				</div>
				<div id="item3" class="mui-control-content">
					<!--这里放置真实显示的DOM内容-->
					<ul id="gride3" class="mui-table-view mui-grid-view mui-grid-9"></ul>
					<button type="button" class="mui-btn mui-btn-danger group-button">退群</button>

				</div>

			</div>

		</div>

	</body>
	<script src="../../js/mui.min.js"></script>
	<script type="text/javascript">
		mui.init()
	</script>
	<script src="../../js/utils/grideControl.js"></script>
	<script src="../../js/publicProtocol.js"></script>
	<script>
		var groupId=null;
			var groupName=null;
		mui('.mui-scroll-wrapper').scroll({
			indicators: true, //是否显示滚动条
		})
		mui.plusReady(function() {
			
			window.addEventListener('postGroupInfo',function(e){
				console.log(JSON.stringify(e.detail.data));
				if(e.detail.data){
					groupId=e.detail.data.classId;
					groupName=e.detail.data.className;
					document.getElementById('title').innerText=groupName;
					setGride()
				}
			})
		
		})
		var setGride = function() {
//top: '',//选择条数
//			vvl:'',//群ID，查询的值
//			vvl1:''//群员类型，0家长,1管理员,2老师,3学生,-1取全部
			var gride1 = document.getElementById('gride1')
			console.log('传送的groupId:'+groupId)
			getGroupInfo(3,gride1);
			var gride2 = document.getElementById('gride2')
			getGroupInfo(2,gride2)
			var gride3 = document.getElementById('gride3')
			getGroupInfo(0,gride3)
//
//			createGirde(gride2, createArray(names, imgs, urls))
//		
//			
//			createGirde(gride3, createArray(names, imgs, urls))
		}
		var getGroupInfo=function(vvl,item){
			var wd=plus.nativeUI.showWaiting(storageKeyName.WAITING)
			postDataPro_PostGusers({top:-1,vvl:groupId,vvl1:vvl},wd,function(data){
					wd.close();
					console.log('获取群组成员：'+vvl+JSON.stringify(data))
					if(data.RspCode=='0000'){
						createGirde(item, data.RspData.data);
					}else{
						mui.toast(data.RspTxt);
					}
				});
		}
		
	</script>

</html>