<!--
	作者：444811716@qq.com
	时间：2016-10-24
	描述：显示学生个人头像
-->
<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>学生个人头像</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/utils/common.css" />
		<script src="../../js/mui.min.js"></script>
		<script type="text/javascript" src="../../js/utils/TouchMove.js"></script>
		<script type="text/javascript" src="../../js/utils/CloudFileUtil.js"></script>
		<script type="text/javascript" src="../../js/cloud/AndroidFileSystem.js"></script>
		<style>
			.personal-imge {
				/*图片*/
				position: absolute;
				width: 50%;
				left: 10%;
			}

			.mui-btn {
				/*确定按钮*/
				margin-right: 10%;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">学生资料头像</h1>
		</header>
		<nav class="mui-bar mui-bar-tab">
			<button type="button" class="mui-btn mui-pull-right mui-btn-outlined">确定</button>
		</nav>
		<div class="mui-content">
			<img id="image" class="personal-imge">
		</div>
		<script type="text/javascript">
			mui.init({
				//				gestureConfig: {
				//					doubletap: true, //开启双击监听
				//				}
			});
			mui.plusReady(function() {
				var ws = plus.webview.currentWebview();
				var path = ws.data.path; //获取路径
				//var width = ws.width;//图片宽度
				//var height = ws.height;//图片高度
				var img = document.getElementById("image");
				console.log('图片路径:' + path);
				//console.log('图片宽度:' + width);
				//console.log('图片高度:' + height);
				img.src = path; //显示图片
				img.onload = function() {
					TouchMove.addTouchListener(img);
					plus.nativeUI.closeWaiting(); //关闭等待窗口
				}

//				mui('.mui-bar-tab').on('tap', '.mui-btn', function() {
//					var getUpTokenUrl = window.storageKeyName.QNGETUPTOKENHEADIMGE;
//
//					CloudFileUtil.getQNUpToken(getUpTokenUrl, QNFileName, function(data) {
//						var QNUptoken = data.uptoken;
//						console.log('七牛上传token:' + QNUptoken);
//						plus.nativeUI.closeWaiting();
//						CloudFileUtil.upload(fPath, QNUptoken, QNFileName, function(upload, status) {
//							//上传任务完成的监听
//							console.log('上传任务完成');
//
//						}, function(upload, status) {
//							//上传任务状态监听
//							//上传任务的标识
//							var id = upload.__UUID__;
//							//已完成上传数据的大小
//							var uploadedSize = AndroidFileSystem.readSize(upload.uploadedSize);
//							//上传数据的总大小
//							var totalSize = AndroidFileSystem.readSize(upload.totalSize);
//							//上传任务的状态
//							var uploadState = upload.state;
//							switch(uploadState) {
//								case 0: //上传任务开始调度
//									console.log('上传任务开始调度:|id:' + id + '|uploadState:' + uploadState);
//									break;
//								case 1: //上传任务开始请求
//									console.log('上传任务开始请求:|id:' + id + '|uploadState:' + uploadState);
//									break;
//								case 2: //上传任务请求已经建立
//									console.log('上传任务请求已经建立:|id:' + id + '|uploadState:' + uploadState);
//									break;
//								case 3: //上传任务提交数据
//									console.log('上传任务状态监听:|id:' + id + '|uploadedSize:' + uploadedSize + '|totalSize:' + totalSize + '|uploadState:' + uploadState);
//
//									break;
//								case 4: //上传任务已完成
//									console.log('上传任务已完成:|id:' + id + '|uploadState:' + uploadState);
//									break;
//								case 5: //上传任务已暂停
//									//document.getElementById("up_btn_" + id).innerText = '继续';
//									//document.getElementById("up_btn_" + id).value = '5';
//									console.log('上传任务已暂停:|id:' + id + '|uploadState:' + uploadState);
//									break;
//								default:
//									console.log('上传任务状态监听:其他状态' + uploadState);
//									break;
//							}
//						}, function(task) {
//							//上传任务创建成功的回调
//							task.start();
//						});
//					}, function(xhr, type, errorThrown) {
//						plus.nativeUI.closeWaiting();
//						mui.toast('获取七牛上传token失败：' + type);
//						console.log('获取七牛上传token失败：' + type);
//					});
//				});
				//用于实现图片拖动缩放
				//				mui('body').on('touchstart', '.mui-content', function() {
				//					console.log('滑动:touchstart');
				//				});
				//				mui('body').on('touchmove', '.mui-content', function() {
				//					console.log('滑动:touchmove');
				//				});
				//				mui('body').on('touchend', '.mui-content', function() {
				//					console.log('滑动:touchend');
				//				});
			})
		</script>
	</body>

</html>